# 🚀 1단계 - 웹 요청 / 응답 처리
## 상황 설명
- 기존에는 로컬 환경에서 콘솔 애플리케이션을 이용하여 예약 정보를 관리해왔다.
- 콘솔 애플리케이션을 웹 애플리케이션으로 전환하여 집에서도 웹을 통해 예약 관리를 할 수 있도록 해야한다.
## 요구사항
### 기능 요구사항
- [ ] 웹 요청 / 응답 처리로 입출력 추가
  - [ ] 예약 하기
  - [ ] 예약 조회
  - [ ] 예약 취소
- [ ] 예외 처리
  - [ ] 예약 생성 시 날짜와 시간이 똑같은 예약이 이미 있는 경우 예약을 생성할 수 없다.
  
### 프로그래밍 요구사항
- 기존 콘솔 애플리케이션은 그대로 잘 동작해야한다.
- 콘솔 애플리케이션과 웹 애플리케이션의 중복 코드는 허용한다. (다음 단계에서 리팩터링 예정)

## API 설계
### 예약 생성
```Java
POST /reservations HTTP/1.1
content-type: application/json; charset=UTF-8
host: localhost:8080

{
    "date": "2022-08-11",
    "time": "13:00",
    "name": "name"
}
```
```Java
HTTP/1.1 201 Created
Location: /reservations/1
````
### 예약 조회
```Java
GET /reservations/1 HTTP/1.1
```
``` Java
HTTP/1.1 200 
Content-Type: application/json

{
    "id": 1,
    "date": "2022-08-11",
    "time": "13:00",
    "name": "name",
    "themeName": "워너고홈",
    "themeDesc": "병맛 어드벤처 회사 코믹물",
    "themePrice": 29000
}
```
### 예약 삭제
```Java
DELETE /reservations/1 HTTP/1.1
```
```Java
HTTP/1.1 204 
```
## 요구사항 설명
### 웹 요청 / 응답 처리로 입출력 변경
- Scanner와 System.out을 이용한 입출력 대신 Spring MVC에서 제공하는 웹 요청과 응답을 통해 입출력을 구현한다.
### 응답 코드 Http Status Code
- 응답 상황에 맞는 응답 코드를 선택한다.
- 정상적인 케이스에는 API 설계를 통해 응답 코드가 결정되어있다.
- 예외 처리 시 어떤 Status Code를 사용할 지 고민해본다.

<hr>

# 🚀 2단계 - 데이터베이스 적용

## 상황 설명
- 기존에는 별도의 저장공간을 활용하지 않아 애플리케이션을 종료할 경우 데이터가 사라졌다.
- 데이터베이스를 연동하여 애플리케이션 재부팅 하더라도 데이터가 남아있도록 한다.

## 요구사항

```이번 단계의 목표는 Spring JDBC를 이용해서 데이터베이스를 연결하는 방법과 이용하지 않는 방법을 경험하는것 입니다.```

### 기능 요구사항
- [ ] 콘솔 애플리케이션에 데이터베이스를 적용한다.
  - 직접 커넥션을 만들어서 데이터베이스에 접근한다.
- [ ] 웹 애플리케이션에 데이터베이스를 적용한다.
  - 스프링이 제공하는 기능을 활용하여 데이터베이스에 접근한다.
  
### 프로그래밍 요구사항
- 콘솔 애플리케이션과 웹 애플리케이션에서 `각각` 데이터베이스에 접근하는 로직을 구현한다.
- 콘솔 애플리케이션에서 데이터베이스에 접근 시 `JdbcTemplate`를 사용하지 않는다. 직접 Connection을 생성하여 데이터베이스에 접근한다.
- 웹 애플리케이션에서 데이터베이스 접근 시 `JdbcTemplate`를 사용한다.
- 콘솔 애플리케이션과 웹 애플리케이션의 중복 코드 제거해본다.


## 요구사항 설명
### 데이터베이스 설치 및 실행
- 스프링을 이용하여 웹 애플리케이션을 만들 시 gradle을 이용하여 별도의 설치 없이 H2 데이터베이스를 사용할 수 있다.
- 반대로 콘솔 애플리케이션에서 H2 데이터베이스를 사용하려면 직접 설치하고 실행을 시켜주어야 한다.
- H2 데이터베이스 설치 및 실행 방법은 검색으로 손쉽게 찾을 수 있으며 아래 힌트에 간단한 방법을 남겨놓았다.

### 테이블 생성
- 예약 테이블 생성에 필요한 쿼리
- 콘솔 애플리케이션에서는 직접 쿼리를 수행시켜 테이블을 생성한다.
- 웹 애플리케이션에서는 직접 쿼리를 수행시키지 않고 `resources/schema.sql` 에 아래의 내용으로 파일을 추가한다.
```Mysql
CREATE TABLE RESERVATION
(
    id          bigint not null auto_increment,
    date        date,
    time        time,
    name        varchar(20),
    theme_name  varchar(20),
    theme_desc  varchar(255),
    theme_price int,
    primary key (id)
);
```

<hr>

# 🚀 3단계 - 테마 확장 기능 구현
## 상황 설명
방탈출 사업이 흥해서 조만간 몇개의 테마가 추가 될 예정이다.
테마가 늘어나면서 테마별 정보 관리가 필요해졌다.
## 요구사항
### 기능 요구사항
- [ ] 테마 관리 기능 추가
    - [ ] 모든 테마의 시간표는 동일함
- [ ] 요구사항에 없는 내용이 있다면 직접 요구사항을 추가해서 애플리케이션을 완성
  - [ ] 실제 애플리케이션이라고 생각했을 때 발생할 수 있는 예외 상황을 고려하고 처리한다.

### 프로그래밍 요구사항
- [ ] 테마를 관리하는 테이블을 추가한다.
- [ ] 콘솔 애플리케이션과 웹 애플리케이션의 로직의 중복을 제거한다.
  - [ ] 디비 접근을 담당하는 객체를 별도로 만들어 사용한다.
  - [ ] 비즈니스 로직을 담당하는 객체를 별도로 만들어 사용한다.

### API 설계
#### 테마 생성
``` Java
POST /themes HTTP/1.1
content-type: application/json; charset=UTF-8

{
    "name": "테마이름",
    "desc": "테마설명",
    "price": 22000
}
```
```Java
HTTP/1.1 201 Created
Location: /themes/1
```
#### 테마 목록 조회
```Java
GET /themes HTTP/1.1
```
```Java
HTTP/1.1 200 
Content-Type: application/json

[
    {
        "id": 1,
        "name": "테마이름",
        "desc": "테마설명",
        "price": 22000
    }
]
```
#### 테마 삭제
```Java
DELETE /themes/1 HTTP/1.1
```
```Java
HTTP/1.1 204 
```
## 요구사항 설명
### 테마 관리
* 테마 관리 시 필요한 생성, 조회, 목록조회, 수정, 삭제 기능을 구현한다.
* 테마는 이름과 설명, 가격 정보를 가지고 있다.
### 기존 기능 수정
* 테마에 대한 스펙이 변경되었기 때문에 기존 기능인 예약 관리 기능의 로직 수정이 필요할 수 있다.
* 예약과 관계있는 스케줄 혹은 테마는 수정 및 삭제가 불가능하다.
